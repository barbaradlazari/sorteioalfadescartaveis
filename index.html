<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sorteio Alfa Descart√°veis</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      h1 {
        font-weight: bold;
      }
      button {
        transition: all 0.3s ease;
      }
      button:hover {
        transform: scale(1.05);
      }
      footer small {
        font-size: 0.9rem;
      }
      #numero-sorteado {
        font-size: 1.5rem;
        font-weight: bold;
        margin-top: 20px;
        color: #28a745;
      }
      .qr-code {
        max-width: 180px;
        margin: 0 auto 20px;
        display: block;
      }
    </style>
  </head>

  <body class="bg-light text-center d-flex flex-column justify-content-center align-items-center vh-100">
    <div class="container shadow p-5 rounded bg-white">
      <h1 class="mb-4">üéâ Sorteio Alfa Descart√°veis</h1>
      <p class="lead mb-4">Participe com apenas <strong>R$2</strong> escaneando o QR Code ou usando o c√≥digo Pix abaixo:</p>

      <!-- QR Code -->
      <img src="seu-qrcode.png.jpg" alt="QR Code Pix" class="qr-code">

      <!-- Bot√£o de Copiar C√≥digo Pix -->
      <button onclick="copiarPix()" class="btn btn-outline-primary mb-4">
        üìã Copiar c√≥digo Pix
      </button>

      <!-- Campo para digitar o nome -->
      <div class="mb-3">
        <input type="text" id="nome-busca" class="form-control" placeholder="Digite o nome usado no Pix">
      </div>

      <!-- Bot√£o para ver n√∫mero -->
      <button id="ver-numero" class="btn btn-success btn-lg mb-3">Ver meu n√∫mero</button>

      <div id="numero-sorteado"></div>

      <footer class="mt-3 text-muted">
        <small><strong>Boa sorte!</strong> ‚ù§Ô∏è</small>
      </footer>
    </div>

    <script>
      function copiarPix() {
        const codigoPix = "00020126330014br.gov.bcb.pix01114724014989752040000530398654042.005802BR5920BARBARA DIMAN LAZARI6009Sao Paulo62290525REC67F67EF4E696C0810486246304CA0D";
        navigator.clipboard.writeText(codigoPix)
          .then(() => alert("C√≥digo Pix copiado! Agora cole no app do seu banco."))
          .catch(err => alert("Erro ao copiar o c√≥digo."));
      }

      document.getElementById("ver-numero").addEventListener("click", function () {
        const nomeDigitado = document.getElementById("nome-busca").value.trim().toLowerCase();
        const sheetId = "1hS-mi-FQV9WLidQI6GdNERLtWGUu9JK0BuOkYDikGmk";
        const aba = "P√°gina1";
        const url = `https://opensheet.elk.sh/${sheetId}/${aba}`;
    
        if (!nomeDigitado) {
          alert("Digite o nome que voc√™ usou no Pix.");
          return;
        }

        fetch(url)
          .then(response => response.json())
          .then(data => {
            const entrada = data.find(linha => linha["Nome"] && linha["Nome"].toLowerCase().includes(nomeDigitado));

            const resultado = document.getElementById("numero-sorteado");

            if (entrada) {
              resultado.innerHTML = `üéüÔ∏è Seu n√∫mero da sorte √©: <strong>${entrada["N√∫mero"]}</strong><br> Nome: ${entrada["Nome"]}`;

              // Redireciona para o WhatsApp ap√≥s 5 segundos
              setTimeout(() => {
                const mensagem = encodeURIComponent(`Meu n√∫mero da sorte: ${entrada["N√∫mero"]} (nome: ${entrada["Nome"]})`);
                const linkWhatsApp = `https://wa.me/551148921286?text=${mensagem}`;
                window.location.href = linkWhatsApp;
              }, 5000);
            } else {
              resultado.innerHTML = `‚ùå Nome n√£o encontrado. Verifique se escreveu exatamente como no Pix.`;
            }
          })
          .catch(err => {
            console.error("Erro ao buscar dados:", err);
            document.getElementById("numero-sorteado").textContent = "Erro ao buscar o n√∫mero. Tente novamente.";
          });
      });
    </script>
  </body>
</html>
